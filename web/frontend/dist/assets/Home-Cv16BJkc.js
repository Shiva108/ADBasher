import{j as e}from"./index-Ca7tVjl2.js";import{r as s,L as t}from"./router-ld5oCHAN.js";import{a}from"./api-Do7PkaxD.js";import{T as l,C as r,X as i,a as n,P as d}from"./ui-jJASe3J9.js";import"./react-vendor-BhyxaAfg.js";function c(){const[c,x]=s.useState([]),[m,o]=s.useState(!0);s.useEffect(()=>{const e=()=>{return e=null,s=null,t=function*(){try{const e=yield a.get("/campaigns");x(e.campaigns||[]),o(!1)}catch(e){o(!1)}},new Promise((a,l)=>{var r=e=>{try{n(t.next(e))}catch(s){l(s)}},i=e=>{try{n(t.throw(e))}catch(s){l(s)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,i);n((t=t.apply(e,s)).next())});var e,s,t};e();const s=setInterval(e,5e3);return()=>clearInterval(s)},[]);const h=s=>{switch(s){case"running":return e.jsx(d,{className:"h-5 w-5 text-blue-500 animate-pulse"});case"completed":return e.jsx(n,{className:"h-5 w-5 text-emerald-500"});case"failed":return e.jsx(i,{className:"h-5 w-5 text-red-500"});default:return e.jsx(r,{className:"h-5 w-5 text-slate-400"})}},p=e=>{const s=Math.floor(e/3600),t=Math.floor(e%3600/60);return s>0?`${s}h ${t}m`:`${t}m`};return m?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-emerald-500"}),e.jsx("p",{className:"mt-4 text-slate-400",children:"Loading campaigns..."})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Penetration Test Campaigns"}),e.jsx("p",{className:"text-slate-400",children:"Manage and monitor Active Directory assessments"})]}),0===c.length?e.jsxs("div",{className:"bg-slate-800 rounded-lg p-12 text-center border border-slate-700",children:[e.jsx(l,{className:"h-16 w-16 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No campaigns yet"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Create your first penetration test campaign to get started"}),e.jsx(t,{to:"/new-campaign",className:"inline-block bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 rounded-md font-medium transition-colors",children:"Create Campaign"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(s=>{var a,l,r;return e.jsxs(t,{to:`/campaign/${s.campaign_id}`,className:"bg-slate-800 rounded-lg p-6 border border-slate-700 hover:border-emerald-500 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[h(s.status),e.jsx("span",{className:"text-sm font-medium text-slate-400 capitalize",children:s.status})]}),e.jsx("span",{className:"text-xs text-slate-500",children:p(s.elapsed_seconds)})]}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:s.name}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-slate-400 mb-1",children:[e.jsx("span",{children:s.current_phase}),e.jsxs("span",{children:[s.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-emerald-500 h-2 rounded-full transition-all duration-300",style:{width:`${s.progress}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:(null==(a=s.statistics)?void 0:a.targets)||0}),e.jsx("div",{className:"text-xs text-slate-400",children:"Targets"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-500",children:(null==(l=s.statistics)?void 0:l.credentials)||0}),e.jsx("div",{className:"text-xs text-slate-400",children:"Creds"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-amber-500",children:(null==(r=s.statistics)?void 0:r.vulnerabilities)||0}),e.jsx("div",{className:"text-xs text-slate-400",children:"Vulns"})]})]})]},s.campaign_id)})})]})}export{c as default};
